<!DOCTYPE html>

<html lang="ca">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>P.I.A.R II. Cap amb IA</title>
<link href="style.css" rel="stylesheet"/></head>
<body>
<header>P.I.A.R II. Cap amb IA</header>
<div id="camera-container">
<video autoplay="" id="video" muted="" playsinline=""></video>
<canvas id="canvas"></canvas>
</div>
<div id="info-panel">
<p><strong>Gir horitzontal:</strong> <span id="yaw">0</span>   
       <strong>Boca:</strong> <span id="mouth">0</span>   
       <strong>Ull E:</strong> <span id="eyeL">0</span>   
       <strong>Ull D:</strong> <span id="eyeR">0</span></p>
<div id="buttons">
<button id="connectBtn">🔗 Connectar</button>
<button id="infoBtn" onclick="document.getElementById('info-layer').style.display='block'">ℹ️ Informació</button>
<button id="fullscreenBtn" onclick="toggleFullscreen()">Pantalla completa</button>
</div>
<div id="status">⏳ Esperant connexió...</div>
</div>
<div id="panel-anàlisi">
<button onclick="document.getElementById('panel-anàlisi').style.display='none'">✕</button>
<h4>Anàlisi facial</h4>
<p><strong>Somriure:</strong> <span id="smile">0</span></p>
<p><strong>Front arrugat:</strong> <span id="frown">0</span></p>
<p><strong>Celles alçades:</strong> <span id="brows">0</span></p>
<p><strong>Cap amunt/avall:</strong> <span id="pitch">0</span></p>
<p><strong>Cap inclinat:</strong> <span id="roll">0</span></p>
</div>
<button onclick="document.getElementById('panel-anàlisi').style.display='block'" style="position:absolute;bottom:110px;left:10px;">
    ➕ Mostra anàlisi
  </button>
<div id="info-layer">
<h2>Informació del funcionament</h2>
<p>Aquesta aplicació utilitza intel·ligència artificial per detectar la posició del cap, l’obertura de la boca i l’estat dels ulls en temps real, i envia aquestes dades a una micro:bit a través de Bluetooth (sense emparellament).</p>
<p><strong>Format de dades enviades per UART (6 dígits):</strong></p>
<ul><li><strong>2 dígits:</strong> gir horitzontal del cap (00 a 99)</li><li><strong>2 dígits:</strong> obertura de boca (00 a 99)</li><li><strong>1 dígit:</strong> ull esquerre (0 = tancat, 1 = obert)</li><li><strong>1 dígit:</strong> ull dret (0 = tancat, 1 = obert)</li><li><strong>2 dígits:</strong> somriure (00–10)</li><li><strong>3 dígits:</strong> celles alçades (000–999)</li><li><strong>2 dígits:</strong> front arrugat (00–10)</li></ul>
<p><strong>Exemple:</strong> <code>731011</code></p>
<p>Projecte inspirat en: <a href="https://cardboard.lofirobot.com/face-app-info/" target="_blank">cardboard.lofirobot.com</a></p>
<p>Fet per Jose amb ❤️ i tecnologia IA</p><p>Fet per Jose amb ❤️ i tecnologia IA</p><button onclick="document.getElementById('info-layer').style.display='none'">Tancar</button>
</div>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script><script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script><script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script><script src="script.js"></script></body>
</html>
